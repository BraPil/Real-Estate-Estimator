# V2.1.2 Adaptive Routing - Conclusion

**Date:** 2025-12-08  
**Status:** ⏸️ LOW PRIORITY - Documented for future reference  
**Decision:** Accept `/predict-full` as best no-zipcode strategy

---

## Summary

We explored adaptive endpoint routing based on price tiers and discovered an interesting pattern, but the implementation complexity isn't justified by the results.

---

## Key Finding: Price-Tier Bias

| Price Tier | Better Strategy | Win Rate |
|------------|-----------------|----------|
| < $400,000 | `/predict-minimal` | 62% |
| ≥ $400,000 | `/predict-full` | 88% |

**Hypothesis CONFIRMED** - There IS a real pattern where:
- Low-value homes: Default feature values work well
- High-value homes: Specific premium features matter

---

## Why We're Not Pursuing This Now

### 1. Results Don't Justify Complexity

```
/predict-full (always):    $164,495 avg error
/predict-adaptive:         $166,126 avg error  ← 1% WORSE
```

The adaptive routing classifier is only 52% accurate, negating the benefit.

### 2. Test Set Contamination

- Pattern discovered by examining test data
- $400K threshold is overfit to this specific dataset
- Any feature-based threshold would have the same issue

### 3. Higher ROI Elsewhere

Hyperparameter tuning (V2.3) offers:
- Cleaner methodology (proper cross-validation)
- More defensible results
- Standard ML practice

---

## Current Best Strategy

| Scenario | Recommended Endpoint | Reason |
|----------|---------------------|--------|
| Have zipcode | `/predict` | Gold standard with demographics |
| No zipcode, have all details | `/predict-full` | Best single strategy |
| No zipcode, minimal info | `/predict-minimal` | Acceptable fallback |

---

## Future Exploration (Low Priority)

If we want to revisit this after V2.5:

1. **Proper validation split** - Need train/validation/test to avoid contamination
2. **Feature-based routing** - Premium score (waterfront, grade, view) may be cleaner than price-based
3. **Ensemble methods** - Weighted average of both predictions
4. **Dynamic threshold** - Find optimal cutpoint via cross-validation

Script available: `scripts/feature_routing_experiment.py`

---

## Lessons Learned

1. **Statistical significance ≠ practical benefit** - Pattern was real but not exploitable
2. **Beware test set peeking** - Easy to overfit when discovering patterns
3. **Simplicity wins** - `/predict-full` is nearly optimal and much simpler
4. **Document dead ends** - This exploration wasn't wasted, it's knowledge

---

**Decision:** Move forward with V2.3 (Hyperparameter Tuning)

**Document Version:** 1.0  
**Last Updated:** 2025-12-08
